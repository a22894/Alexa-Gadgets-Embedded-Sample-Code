## compile_nanos Shell and Batch Scripts
The compile_nanos script will compile all the .proto files in this repository and deposit the C and header source files into this folder. To run the script, open a shell to the /util folder and edit the compile_nano.sh (macOS/Linux) or compile_nanos.bat (Windows). Within the script, update the PROTO_COMPILE_PATH variable to point to the install location of Nanopb (Nanopb is a requirement for these scripts and can be found here https://github.com/nanopb/nanopb). Run the script from the /util folder. All generated source code C and Header files will be deposited in the /util folder.

## proto_sample.c

This sample code file proto_sample.c performs 2 actions:
1. Serialize a proto message represented by the notificationsSetIndicatorDirective.proto, represented by the following JSON:
{
    "directive": {
        "header": {
            "namespace": "Notifications",
            "name": "SetIndicator",
            "messageId": "messageID1"
        },
        "payload": {
            "persistVisualIndicator": true,
            "playAudioIndicator": true,
            "asset": {
                "assetId": "assetID1",
                "url": "url1"
            }
        }
    }
}

2. Deserialize the byte array generated by the step 1.

### Building proto_sample.c

1.	Copy supporting source files
In order to prepare the sample, copy the following files from your Nanopb installation folder into the same folder where proto_sample.c resides:
pb.h
pb_common.c
pb_common.h
pb_decode.c
pb_decode.h
pb_encode.c
pb_encode.h

2.	Execute the shell script compile_nanos.sh
This step will generate the .c/.h files of all the proto/option files shipped
4. Compile the proto_sample.c, use the following gcc command:

gcc -I. -DPB_FIELD_16BIT notificationsSetIndicatorDirectivePayload.pb.c notificationsSetIndicatorDirective.pb.c pb_common.c    pb_decode.c pb_encode.c directiveHeader.pb.c directiveParser.pb.c proto_sample.c -o proto_sample

5. Execute the executable file:

./proto_sample



